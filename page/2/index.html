<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta property="og:type" content="website">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="http://example.com/page/2/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.4.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main">
  
    <article id="post-Tokenize模块" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/10/08/Tokenize%E6%A8%A1%E5%9D%97/" class="article-date">
  <time class="dt-published" datetime="2021-10-08T00:17:33.062Z" itemprop="datePublished">2021-10-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p>[^1]:<a target="_blank" rel="noopener" href="https://docs.python.org/zh-cn/3/library/tokenize.html">tokenize — 对 Python 代码使用的标记解析器 — Python 3.9.6 文档</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/10/08/Tokenize%E6%A8%A1%E5%9D%97/" data-id="ckuhmdwgx0004pscw2vl54sdk" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-sys模块" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/10/08/sys%E6%A8%A1%E5%9D%97/" class="article-date">
  <time class="dt-published" datetime="2021-10-08T00:17:33.060Z" itemprop="datePublished">2021-10-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h3 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h3><h3 id="sys模块-常用"><a href="#sys模块-常用" class="headerlink" title="sys模块 常用"></a>sys模块 常用</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sys.platform<span class="comment">#</span></span><br><span class="line">sys.argv</span><br><span class="line">sys.p </span><br></pre></td></tr></table></figure>

<h3 id="调用函数"><a href="#调用函数" class="headerlink" title="调用函数"></a>调用函数</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sys._getframe()<span class="comment">#看看当前调用的是什么函数</span></span><br><span class="line">sys._getframe(<span class="number">1</span>)<span class="comment">#看看调用当前函数的函数是啥,套娃</span></span><br><span class="line">sys._getframe(<span class="number">2</span>).f_code.co_name<span class="comment">#如果是&lt;module&gt;,则没有被调用,或者说到了最大层了.</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#测试法</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> <span class="built_in">dir</span>(sys._getframe()):</span><br><span class="line">    <span class="keyword">if</span> i[<span class="number">0</span>] ==<span class="string">r&#x27;f&#x27;</span>:</span><br><span class="line">        a = <span class="number">3</span></span><br><span class="line">        b = []</span><br><span class="line">        <span class="built_in">print</span>(i)</span><br><span class="line">        <span class="built_in">print</span>(<span class="built_in">getattr</span>(sys._getframe(),i))</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#测试法2</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">a = <span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_fun</span>():</span></span><br><span class="line">    a = <span class="number">3</span></span><br><span class="line">    b = []</span><br><span class="line">    <span class="built_in">print</span>(sys._getframe(<span class="number">0</span>).f_locals)</span><br><span class="line">    <span class="built_in">print</span>(sys._getframe(<span class="number">1</span>).f_globals)</span><br><span class="line">    <span class="built_in">print</span>(sys._getframe(<span class="number">2</span>).f_globals)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_fun2</span>():</span></span><br><span class="line">    get_fun()</span><br><span class="line"></span><br><span class="line">get_fun2()</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/10/08/sys%E6%A8%A1%E5%9D%97/" data-id="ckuhmdwh00008pscw2xpu30b1" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-python源码" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/10/08/python%E6%BA%90%E7%A0%81/" class="article-date">
  <time class="dt-published" datetime="2021-10-08T00:17:33.059Z" itemprop="datePublished">2021-10-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="参考博客"><a href="#参考博客" class="headerlink" title="参考博客"></a>参考博客</h2><p>[^1]:<a target="_blank" rel="noopener" href="https://flaggo.github.io/python3-source-code-analysis/preface/code-organization/">Python 源代码的组织 · Python 3 源码分析 (flaggo.github.io)</a><br>[^2]:<a target="_blank" rel="noopener" href="https://www.cnblogs.com/Kwan-C/p/13969616.html">Python源码下载和目录简介 - Kwan、C - 博客园 (cnblogs.com)</a></p>
<h2 id="python源码"><a href="#python源码" class="headerlink" title="python源码"></a>python源码</h2><p><strong>Parser 目录</strong>：包含了 Python 解释器中的 Scanner 和 Parser 部分，即对 Python 源代码进行词法分析和语法分析的部分。除此以外，此目录还包含了一些有用的工具，这些工具能够根据 Python 语言的语法自动生成 Python 语言的词法和语法分析器，与 YACC 非常类似。</p>
<p><strong>Objects 目录</strong>：包含了所有 Python 的内建对象，包括整数、list、dict 等。同时，该目录还包括了 Python 在运行时需要的所有的内部使用对象的实现。</p>
<p><strong>Python 目录</strong>：包含了 Python 解释器中的 Compiler 和执行引擎部分，是 Python 运行的核心所在。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/10/08/python%E6%BA%90%E7%A0%81/" data-id="ckuhmdwgz0007pscw5fwxf55f" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-python写编译器" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/10/08/python%E5%86%99%E7%BC%96%E8%AF%91%E5%99%A8/" class="article-date">
  <time class="dt-published" datetime="2021-10-08T00:17:33.058Z" itemprop="datePublished">2021-10-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="参考博客"><a href="#参考博客" class="headerlink" title="参考博客"></a>参考博客</h2><p>[^1]:<a target="_blank" rel="noopener" href="https://blog.csdn.net/com_ma/article/details/79414952">(12条消息) python编写python编译器的原理简介_Faith的博客-CSDN博客_python编译器工作原理</a><br>[^2]:<a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/72933062">【PCC】一个用python写的ｃ语言编译器 - 知乎 (zhihu.com)</a></p>
<h2 id="python写python解释器"><a href="#python写python解释器" class="headerlink" title="python写python解释器"></a>python写python解释器</h2><p><strong>清晰和简单比速度更重要</strong>[^1]</p>
<h2 id="pcc–python实现c语言的编译器"><a href="#pcc–python实现c语言的编译器" class="headerlink" title="pcc–python实现c语言的编译器"></a>pcc–python实现c语言的编译器</h2><p>我们想通过这个程序研究一下只生成语法树的程序,不需要生成汇编之类的东西[^2]</p>
<p>程序测试</p>
<h3 id="pcc-py"><a href="#pcc-py" class="headerlink" title="pcc.py"></a>pcc.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pcc -o ./test/test.c</span><br><span class="line"><span class="comment">#</span></span><br><span class="line">to_asm(slist[<span class="number">2</span>])<span class="comment">#./test/test.c</span></span><br></pre></td></tr></table></figure>

<h3 id="to-asm-py"><a href="#to-asm-py" class="headerlink" title="to_asm.py"></a>to_asm.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">to_asm(filename)<span class="comment">#./test/test.c</span></span><br><span class="line">mid_result = creat_mcode(filename)<span class="comment">#test.c</span></span><br></pre></td></tr></table></figure>



<h3 id="generate-py"><a href="#generate-py" class="headerlink" title="generate.py"></a>generate.py</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">w_list = word_list(filename)<span class="comment">#test.c</span></span><br><span class="line"></span><br><span class="line">root = analysis(word_table)[<span class="number">1</span>]</span><br></pre></td></tr></table></figure>




<h3 id="lexer-py-词法分析器"><a href="#lexer-py-词法分析器" class="headerlink" title="lexer.py 词法分析器"></a>lexer.py 词法分析器</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">word_list</span></span></span><br><span class="line"><span class="class"><span class="title">class</span> <span class="title">word_list</span>():</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, filename=<span class="string">&#x27;test.c&#x27;</span></span>):</span></span><br><span class="line">        self.word_list = []          <span class="comment"># 输出单词列表</span></span><br><span class="line">        self.separator_list = []     <span class="comment"># 分隔符</span></span><br><span class="line">        self.operator_list = []      <span class="comment"># 运算符</span></span><br><span class="line">        self.name_list = []          <span class="comment"># 变量</span></span><br><span class="line">        self.key_word_table = []     <span class="comment"># 关键字</span></span><br><span class="line">        self.string_list = []</span><br><span class="line">        self.flag = <span class="literal">True</span>             <span class="comment"># 源代码是否正确标识</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment"># get_word函数将源代码切割</span></span><br><span class="line">        self.creat_table(get_word(filename))</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">creat_table(in_words)</span><br><span class="line"><span class="comment">#in_words 就是 [&#123;&#x27;word&#x27;: &#x27;int&#x27;, &#x27;line&#x27;: 3&#125;,</span></span><br><span class="line"><span class="keyword">global</span> k_list;程序关键字<span class="built_in">list</span>,比如<span class="keyword">for</span> <span class="keyword">else</span></span><br><span class="line"><span class="keyword">global</span> <span class="type">Type</span>;<span class="built_in">int</span>,<span class="built_in">float</span>等关键字;</span><br><span class="line">y_list;运算符yun <span class="built_in">list</span></span><br><span class="line">f_list;分隔符fen <span class="built_in">list</span>;low?</span><br><span class="line"></span><br><span class="line">key_word_table;word_list;存<span class="built_in">type</span>关键字</span><br><span class="line">name_list;存变量名字;防止变量名字重复</span><br><span class="line">word_list;存变量</span><br><span class="line">separator_list;分隔符</span><br><span class="line">operator_list;运算符</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">大boss</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">word_list</span>#有单词,分隔符,运算符,变量,关键字,字符串;</span></span><br></pre></td></tr></table></figure>



<h3 id="function-py-词法分析器"><a href="#function-py-词法分析器" class="headerlink" title="function.py 词法分析器"></a>function.py 词法分析器</h3><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 既然给单词加了行的信息,也就可以给单词加列的信息;</span></span><br><span class="line"></span><br><span class="line">get_word(filename)<span class="comment">#input一个文件地址,return一个list,把源码分割了,例如</span></span><br><span class="line">output: [&#123;<span class="string">&#x27;word&#x27;</span>: <span class="string">&#x27;int&#x27;</span>, <span class="string">&#x27;line&#x27;</span>: <span class="number">3</span>&#125;,</span><br><span class="line">         &#123;<span class="string">&#x27;word&#x27;</span>: <span class="string">&#x27;main&#x27;</span>, <span class="string">&#x27;line&#x27;</span>: <span class="number">3</span>&#125;,</span><br><span class="line">         &#123;<span class="string">&#x27;word&#x27;</span>: <span class="string">&#x27;(&#x27;</span>, <span class="string">&#x27;line&#x27;</span>: <span class="number">3</span>&#125;,</span><br></pre></td></tr></table></figure>



<h3 id="LR-py"><a href="#LR-py" class="headerlink" title="LR.py"></a>LR.py</h3><p>语法生成树</p>
<p>此时已经完成词法分析;拿着带着各种属性的词来语法分析</p>
<p><strong>analysis</strong></p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>Node</strong>:class node 语法树节点</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Node</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, <span class="type">Type</span>, text=<span class="literal">None</span></span>):</span></span><br><span class="line">        self.<span class="built_in">type</span> = <span class="type">Type</span></span><br><span class="line">        self.text = text</span><br><span class="line">        self.child = <span class="built_in">list</span>()</span><br><span class="line">    <span class="comment"># 将语法树对象字符化输出</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__str__</span>(<span class="params">self</span>):</span></span><br><span class="line">        childs = <span class="built_in">list</span>()</span><br><span class="line">        <span class="keyword">for</span> child <span class="keyword">in</span> self.child:</span><br><span class="line">            childs.append(child.__str__())</span><br><span class="line">        out = <span class="string">&quot;&lt;&#123;type&#125;, &#123;text&#125;&gt;&quot;</span>.<span class="built_in">format</span>(<span class="built_in">type</span>=self.<span class="built_in">type</span>, text=self.text)</span><br><span class="line">        <span class="keyword">for</span> child <span class="keyword">in</span> childs:</span><br><span class="line">            <span class="keyword">if</span> child:</span><br><span class="line">                <span class="keyword">for</span> line <span class="keyword">in</span> child.split(<span class="string">&quot;\n&quot;</span>):</span><br><span class="line">                    out = out + <span class="string">&quot;\n     &quot;</span> + line</span><br><span class="line">        <span class="keyword">return</span> out</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__repr__</span>(<span class="params">self</span>):</span></span><br><span class="line">        <span class="keyword">return</span> self.__str__()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>重写str是个很不错的方法.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/10/08/python%E5%86%99%E7%BC%96%E8%AF%91%E5%99%A8/" data-id="ckuhmdwgy0006pscw841h9p7s" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-PLY模块" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/10/08/PLY%E6%A8%A1%E5%9D%97/" class="article-date">
  <time class="dt-published" datetime="2021-10-08T00:17:33.056Z" itemprop="datePublished">2021-10-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="参考文献"><a href="#参考文献" class="headerlink" title="参考文献"></a>参考文献</h2><p>[^1]:<a target="_blank" rel="noopener" href="http://www.dabeaz.com/ply/ply.html">PLY (Python Lex-Yacc) (dabeaz.com)</a><br>[^2]:<a target="_blank" rel="noopener" href="https://blog.csdn.net/feixiaoxing/article/details/79123776">(13条消息) python编程（ply库）_平凡的程序员-CSDN博客</a></p>
<h2 id="问题"><a href="#问题" class="headerlink" title="问题"></a>问题</h2><p>1 lexer中的module能添加自定义属性吗?</p>
<h2 id="lex"><a href="#lex" class="headerlink" title="lex"></a>lex</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> ply.lex <span class="keyword">as</span> lex</span><br><span class="line"><span class="keyword">import</span> ply.ygen <span class="keyword">as</span> gen</span><br><span class="line"><span class="keyword">import</span> ply.yacc <span class="keyword">as</span> yacc</span><br><span class="line">tokens = (</span><br><span class="line">   <span class="string">&#x27;NUMBER&#x27;</span>,</span><br><span class="line">   <span class="string">&#x27;PLUS&#x27;</span>,</span><br><span class="line">   <span class="string">&#x27;MINUS&#x27;</span>,</span><br><span class="line">   <span class="string">&#x27;TIMES&#x27;</span>,</span><br><span class="line">   <span class="string">&#x27;DIVIDE&#x27;</span>,</span><br><span class="line">   <span class="string">&#x27;LPAREN&#x27;</span>,</span><br><span class="line">   <span class="string">&#x27;RPAREN&#x27;</span>,</span><br><span class="line">)</span><br><span class="line">t_PLUS    = <span class="string">r&#x27;\+&#x27;</span></span><br><span class="line">t_MINUS   = <span class="string">r&#x27;-&#x27;</span></span><br><span class="line">t_TIMES   = <span class="string">r&#x27;\*&#x27;</span></span><br><span class="line">t_DIVIDE  = <span class="string">r&#x27;/&#x27;</span></span><br><span class="line">t_LPAREN  = <span class="string">r&#x27;\(&#x27;</span></span><br><span class="line">t_RPAREN  = <span class="string">r&#x27;\)&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">t_NUMBER</span>(<span class="params">t</span>):</span></span><br><span class="line">    <span class="string">r&#x27;\d+&#x27;</span></span><br><span class="line">    t.value = <span class="built_in">int</span>(t.value)</span><br><span class="line">    <span class="keyword">return</span> t</span><br><span class="line"></span><br><span class="line"><span class="comment"># Define a rule so we can track line numbers</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">t_newline</span>(<span class="params">t</span>):</span></span><br><span class="line">    <span class="string">r&#x27;\n+&#x27;</span></span><br><span class="line">    t.lexer.lineno += <span class="built_in">len</span>(t.value)</span><br><span class="line">    t.lexer.col +=<span class="built_in">len</span>(t.value)</span><br><span class="line"></span><br><span class="line"><span class="comment"># A string containing ignored characters (spaces and tabs)</span></span><br><span class="line">t_ignore  = <span class="string">&#x27; \t&#x27;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># def find_column(input, token):</span></span><br><span class="line"><span class="comment">#     line_start = input.rfind(&#x27;\n&#x27;, 0, token.lexpos) + 1</span></span><br><span class="line"><span class="comment">#     return (token.lexpos - line_start) + 1</span></span><br><span class="line"><span class="comment"># Error handling rule</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">t_error</span>(<span class="params">t</span>):</span></span><br><span class="line">    <span class="built_in">print</span> (<span class="string">&quot;Illegal character &#x27;%s&#x27;&quot;</span> % t.value[<span class="number">0</span>])</span><br><span class="line">    t.lexer.skip(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Build the lexer</span></span><br><span class="line">lexer = lex.lex()</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">lex</span>(<span class="params">module=<span class="literal">None</span>, <span class="built_in">object</span>=<span class="literal">None</span>, debug=<span class="literal">False</span>, optimize=<span class="literal">False</span>, lextab=<span class="string">&#x27;lextab&#x27;</span>,</span></span></span><br><span class="line"><span class="params"><span class="function">        reflags=<span class="built_in">int</span>(<span class="params">re.VERBOSE</span>), nowarn=<span class="literal">False</span>, outputdir=<span class="literal">None</span>, debuglog=<span class="literal">None</span>, errorlog=<span class="literal">None</span></span>):</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> lextab <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        lextab = <span class="string">&#x27;lextab&#x27;</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">global</span> lexer</span><br><span class="line"></span><br><span class="line">    ldict = <span class="literal">None</span></span><br><span class="line">    stateinfo  = &#123;<span class="string">&#x27;INITIAL&#x27;</span>: <span class="string">&#x27;inclusive&#x27;</span>&#125;</span><br><span class="line">    lexobj = Lexer()</span><br><span class="line">    </span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Lexer</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self</span>):</span></span><br><span class="line">        self.lexre = <span class="literal">None</span>             <span class="comment"># Master regular expression. This is a list of</span></span><br><span class="line">                                      <span class="comment"># tuples (re, findex) where re is a compiled</span></span><br><span class="line">                                      <span class="comment"># regular expression and findex is a list</span></span><br><span class="line">                                      <span class="comment"># mapping regex group numbers to rules</span></span><br><span class="line">        self.lexretext = <span class="literal">None</span>         <span class="comment"># Current regular expression strings</span></span><br><span class="line">        self.lexstatere = &#123;&#125;          <span class="comment"># Dictionary mapping lexer states to master regexs</span></span><br><span class="line">        self.lexstateretext = &#123;&#125;      <span class="comment"># Dictionary mapping lexer states to regex strings</span></span><br><span class="line">        self.lexstaterenames = &#123;&#125;     <span class="comment"># Dictionary mapping lexer states to symbol names</span></span><br><span class="line">        self.lexstate = <span class="string">&#x27;INITIAL&#x27;</span>     <span class="comment"># Current lexer state</span></span><br><span class="line">        self.lexstatestack = []       <span class="comment"># Stack of lexer states</span></span><br><span class="line">        self.lexstateinfo = <span class="literal">None</span>      <span class="comment"># State information</span></span><br><span class="line">        self.lexstateignore = &#123;&#125;      <span class="comment"># Dictionary of ignored characters for each state</span></span><br><span class="line">        self.lexstateerrorf = &#123;&#125;      <span class="comment"># Dictionary of error functions for each state</span></span><br><span class="line">        self.lexstateeoff = &#123;&#125;        <span class="comment"># Dictionary of eof functions for each state</span></span><br><span class="line">        self.lexreflags = <span class="number">0</span>           <span class="comment"># Optional re compile flags</span></span><br><span class="line">        self.lexdata = <span class="literal">None</span>           <span class="comment"># Actual input data (as a string)</span></span><br><span class="line">        self.lexpos = <span class="number">0</span>               <span class="comment"># Current position in input text</span></span><br><span class="line">        self.lexlen = <span class="number">0</span>               <span class="comment"># Length of the input text</span></span><br><span class="line">        self.lexerrorf = <span class="literal">None</span>         <span class="comment"># Error rule (if any)</span></span><br><span class="line">        self.lexeoff = <span class="literal">None</span>           <span class="comment"># EOF rule (if any)</span></span><br><span class="line">        self.lextokens = <span class="literal">None</span>         <span class="comment"># List of valid tokens</span></span><br><span class="line">        self.lexignore = <span class="string">&#x27;&#x27;</span>           <span class="comment"># Ignored characters</span></span><br><span class="line">        self.lexliterals = <span class="string">&#x27;&#x27;</span>         <span class="comment"># Literal characters that can be passed through</span></span><br><span class="line">        self.lexmodule = <span class="literal">None</span>         <span class="comment"># Module</span></span><br><span class="line">        self.lineno = <span class="number">1</span>               <span class="comment"># Current line number</span></span><br><span class="line">        self.lexoptimize = <span class="literal">False</span>      <span class="comment"># Optimized mode</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">lexobj.lexoptimize = optimize</span><br><span class="line">   <span class="keyword">global</span> token, <span class="built_in">input</span></span><br><span class="line"></span><br><span class="line">   <span class="keyword">if</span> errorlog <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">       errorlog = PlyLogger(sys.stderr)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PlyLogger</span>(<span class="params"><span class="built_in">object</span></span>):</span><span class="comment">#输出的位置重定位,意思是不是在控制台上输出</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, f</span>):</span></span><br><span class="line">        self.f = f<span class="comment">#存放了stderr的信息,temp</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">critical</span>(<span class="params">self, msg, *args, **kwargs</span>):</span></span><br><span class="line">        self.f.write((msg % args) + <span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">warning</span>(<span class="params">self, msg, *args, **kwargs</span>):</span></span><br><span class="line">        self.f.write(<span class="string">&#x27;WARNING: &#x27;</span> + (msg % args) + <span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">error</span>(<span class="params">self, msg, *args, **kwargs</span>):</span></span><br><span class="line">        self.f.write(<span class="string">&#x27;ERROR: &#x27;</span> + (msg % args) + <span class="string">&#x27;\n&#x27;</span>)</span><br><span class="line"></span><br><span class="line">    info = critical</span><br><span class="line">    debug = critical</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> debug:</span><br><span class="line">    <span class="keyword">if</span> debuglog <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        debuglog = PlyLogger(sys.stderr)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Get the module dictionary used for the lexer</span></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">object</span>:</span><br><span class="line">    module = <span class="built_in">object</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Get the module dictionary used for the parser</span></span><br><span class="line"><span class="keyword">if</span> module:</span><br><span class="line">    _items = [(k, <span class="built_in">getattr</span>(module, k)) <span class="keyword">for</span> k <span class="keyword">in</span> <span class="built_in">dir</span>(module)]</span><br><span class="line">    ldict = <span class="built_in">dict</span>(_items)</span><br><span class="line">    <span class="comment"># If no __file__ attribute is available, try to obtain it from the __module__ instead</span></span><br><span class="line">    <span class="keyword">if</span> <span class="string">&#x27;__file__&#x27;</span> <span class="keyword">not</span> <span class="keyword">in</span> ldict:</span><br><span class="line">        ldict[<span class="string">&#x27;__file__&#x27;</span>] = sys.modules[ldict[<span class="string">&#x27;__module__&#x27;</span>]].__file__</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">    ldict = get_caller_module_dict(<span class="number">2</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_caller_module_dict</span>(<span class="params">levels</span>):</span><span class="comment">#找到自己写的文件部分,返回全局变量</span></span><br><span class="line">    f = sys._getframe(levels)</span><br><span class="line">    ldict = f.f_globals.copy()<span class="comment">#复制自己写的全局变量</span></span><br><span class="line">    <span class="keyword">if</span> f.f_globals != f.f_locals:</span><br><span class="line">        ldict.update(f.f_locals)<span class="comment">#放在一起求并集</span></span><br><span class="line">    <span class="keyword">return</span> ldict</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pkg = ldict.get(<span class="string">&#x27;__package__&#x27;</span>)<span class="comment">#lexab文件放在__package__下边.lextab放着词法分析表和语法规则</span></span><br><span class="line">    <span class="keyword">if</span> pkg <span class="keyword">and</span> <span class="built_in">isinstance</span>(lextab, <span class="built_in">str</span>):</span><br><span class="line">        <span class="keyword">if</span> <span class="string">&#x27;.&#x27;</span> <span class="keyword">not</span> <span class="keyword">in</span> lextab:<span class="comment">#</span></span><br><span class="line">            lextab = pkg + <span class="string">&#x27;.&#x27;</span> + lextab</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">linfo = LexerReflect(ldict, log=errorlog, reflags=reflags)</span><br></pre></td></tr></table></figure>



<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">LexerReflect</span>(<span class="params"><span class="built_in">object</span></span>):</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span>(<span class="params">self, ldict, log=<span class="literal">None</span>, reflags=<span class="number">0</span></span>):</span></span><br><span class="line">        self.ldict      = ldict</span><br><span class="line">        self.error_func = <span class="literal">None</span></span><br><span class="line">        self.tokens     = []</span><br><span class="line">        self.reflags    = reflags</span><br><span class="line">        self.stateinfo  = &#123;<span class="string">&#x27;INITIAL&#x27;</span>: <span class="string">&#x27;inclusive&#x27;</span>&#125;</span><br><span class="line">        self.modules    = <span class="built_in">set</span>()</span><br><span class="line">        self.error      = <span class="literal">False</span></span><br><span class="line">        self.log        = PlyLogger(sys.stderr) <span class="keyword">if</span> log <span class="keyword">is</span> <span class="literal">None</span> <span class="keyword">else</span> log</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">linfo.get_all()</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_all</span>(<span class="params">self</span>):</span></span><br><span class="line">    self.get_tokens()<span class="comment">#tokens,</span></span><br><span class="line">    self.get_literals()</span><br><span class="line">    self.get_states()</span><br><span class="line">    self.get_rules()</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_tokens</span>(<span class="params">self</span>):</span></span><br><span class="line">    tokens = self.ldict.get(<span class="string">&#x27;tokens&#x27;</span>, <span class="literal">None</span>)<span class="comment">#dict的好方法</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> tokens:</span><br><span class="line">        self.log.error(<span class="string">&#x27;No token list is defined&#x27;</span>)</span><br><span class="line">        self.error = <span class="literal">True</span></span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> <span class="built_in">isinstance</span>(tokens, (<span class="built_in">list</span>, <span class="built_in">tuple</span>)):<span class="comment">#isinstance的好方法</span></span><br><span class="line">        self.log.error(<span class="string">&#x27;tokens must be a list or tuple&#x27;</span>)</span><br><span class="line">        self.error = <span class="literal">True</span></span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    </span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_rules</span>(<span class="params">self</span>):</span></span><br><span class="line">       tsymbols = [f <span class="keyword">for</span> f <span class="keyword">in</span> self.ldict <span class="keyword">if</span> f[:<span class="number">2</span>] == <span class="string">&#x27;t_&#x27;</span>]</span><br><span class="line"></span><br><span class="line">       <span class="comment"># Now build up a list of functions and a list of strings</span></span><br><span class="line">       self.toknames = &#123;&#125;        <span class="comment"># Mapping of symbols to token names</span></span><br><span class="line">       <span class="comment">#self.toknames = &#123;&#x27;t_PLUS&#x27;: &#x27;PLUS&#x27;, &#x27;t_MINUS&#x27;: &#x27;MINUS&#x27;&#125;</span></span><br><span class="line">       self.funcsym  = &#123;&#125;        <span class="comment"># Symbols defined as functions</span></span><br><span class="line">       self.strsym   = &#123;&#125;        <span class="comment"># Symbols defined as strings</span></span><br><span class="line">       <span class="comment">#self.strsym = &#123;&#x27;INITIAL&#x27;: [(&#x27;t_PLUS&#x27;, &#x27;\\+&#x27;)]&#125;</span></span><br><span class="line">       self.ignore   = &#123;&#125;        <span class="comment"># Ignore strings by state</span></span><br><span class="line">       self.errorf   = &#123;&#125;        <span class="comment"># Error functions by state</span></span><br><span class="line">       self.eoff     = &#123;&#125;        <span class="comment"># EOF functions by state</span></span><br><span class="line"></span><br><span class="line">       <span class="keyword">for</span> s <span class="keyword">in</span> self.stateinfo:</span><br><span class="line">           self.funcsym[s] = []</span><br><span class="line">           self.strsym[s] = []</span><br><span class="line"></span><br><span class="line">       <span class="keyword">if</span> <span class="built_in">len</span>(tsymbols) == <span class="number">0</span>:</span><br><span class="line">           self.log.error(<span class="string">&#x27;No rules of the form t_rulename are defined&#x27;</span>)</span><br><span class="line">           self.error = <span class="literal">True</span></span><br><span class="line">           <span class="keyword">return</span></span><br><span class="line"></span><br><span class="line">       <span class="keyword">for</span> f <span class="keyword">in</span> tsymbols:</span><br><span class="line">           t = self.ldict[f]</span><br><span class="line">           states, tokname = _statetoken(f, self.stateinfo)</span><br><span class="line">           self.toknames[f] = tokname</span><br><span class="line"></span><br><span class="line">           <span class="keyword">if</span> <span class="built_in">hasattr</span>(t, <span class="string">&#x27;__call__&#x27;</span>):</span><br><span class="line">               <span class="keyword">if</span> tokname == <span class="string">&#x27;error&#x27;</span>:</span><br><span class="line">                   <span class="keyword">for</span> s <span class="keyword">in</span> states:</span><br><span class="line">                       self.errorf[s] = t</span><br><span class="line">               <span class="keyword">elif</span> tokname == <span class="string">&#x27;eof&#x27;</span>:</span><br><span class="line">                   <span class="keyword">for</span> s <span class="keyword">in</span> states:</span><br><span class="line">                       self.eoff[s] = t</span><br><span class="line">               <span class="keyword">elif</span> tokname == <span class="string">&#x27;ignore&#x27;</span>:</span><br><span class="line">                   line = t.__code__.co_firstlineno<span class="comment">#代码对象</span></span><br><span class="line">                   file = t.__code__.co_filename</span><br><span class="line">                   self.log.error(<span class="string">&quot;%s:%d: Rule &#x27;%s&#x27; must be defined as a string&quot;</span>, file, line, t.__name__)</span><br><span class="line">                   self.error = <span class="literal">True</span></span><br><span class="line">               <span class="keyword">else</span>:</span><br><span class="line">                   <span class="keyword">for</span> s <span class="keyword">in</span> states:</span><br><span class="line">                       self.funcsym[s].append((f, t))</span><br><span class="line">           <span class="keyword">elif</span> <span class="built_in">isinstance</span>(t, StringTypes):<span class="comment">#str,bytes</span></span><br><span class="line">               <span class="keyword">if</span> tokname == <span class="string">&#x27;ignore&#x27;</span>:</span><br><span class="line">                   <span class="keyword">for</span> s <span class="keyword">in</span> states:</span><br><span class="line">                       self.ignore[s] = t</span><br><span class="line">                   <span class="keyword">if</span> <span class="string">&#x27;\\&#x27;</span> <span class="keyword">in</span> t:</span><br><span class="line">                       self.log.warning(<span class="string">&quot;%s contains a literal backslash &#x27;\\&#x27;&quot;</span>, f)</span><br><span class="line"></span><br><span class="line">               <span class="keyword">elif</span> tokname == <span class="string">&#x27;error&#x27;</span>:</span><br><span class="line">                   self.log.error(<span class="string">&quot;Rule &#x27;%s&#x27; must be defined as a function&quot;</span>, f)</span><br><span class="line">                   self.error = <span class="literal">True</span></span><br><span class="line">               <span class="keyword">else</span>:</span><br><span class="line">                   <span class="keyword">for</span> s <span class="keyword">in</span> states:</span><br><span class="line">                       self.strsym[s].append((f, t))</span><br><span class="line">           <span class="keyword">else</span>:</span><br><span class="line">               self.log.error(<span class="string">&#x27;%s not defined as a function or string&#x27;</span>, f)</span><br><span class="line">               self.error = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line">       <span class="comment"># Sort the functions by line number</span></span><br><span class="line">       <span class="keyword">for</span> f <span class="keyword">in</span> self.funcsym.values():</span><br><span class="line">           f.sort(key=<span class="keyword">lambda</span> x: x[<span class="number">1</span>].__code__.co_firstlineno)</span><br><span class="line">           <span class="comment">#key就是映射了,其实和反射的意思差不多.对了这个firstlineno是def函数的位置</span></span><br><span class="line">		<span class="comment">#排序代表了优先级</span></span><br><span class="line">       <span class="comment"># Sort the strings by regular expression length</span></span><br><span class="line">       <span class="keyword">for</span> s <span class="keyword">in</span> self.strsym.values():</span><br><span class="line">           s.sort(key=<span class="keyword">lambda</span> x: <span class="built_in">len</span>(x[<span class="number">1</span>]), reverse=<span class="literal">True</span>)<span class="comment">#排序代表了优先级,+*优先级大于-/</span></span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">_statetoken</span>(<span class="params">s, names</span>):</span><span class="comment">#感觉state就是看你用哪种词法分析器逻辑</span></span><br><span class="line">    parts = s.split(<span class="string">&#x27;_&#x27;</span>)</span><br><span class="line">    <span class="keyword">for</span> i, part <span class="keyword">in</span> <span class="built_in">enumerate</span>(parts[<span class="number">1</span>:], <span class="number">1</span>):<span class="comment">#下标起始的位置</span></span><br><span class="line">        <span class="keyword">if</span> part <span class="keyword">not</span> <span class="keyword">in</span> names <span class="keyword">and</span> part != <span class="string">&#x27;ANY&#x27;</span>:</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> i &gt; <span class="number">1</span>:</span><br><span class="line">        states = <span class="built_in">tuple</span>(parts[<span class="number">1</span>:i])</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        states = (<span class="string">&#x27;INITIAL&#x27;</span>,)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> <span class="string">&#x27;ANY&#x27;</span> <span class="keyword">in</span> states:</span><br><span class="line">        states = <span class="built_in">tuple</span>(names)</span><br><span class="line"></span><br><span class="line">    tokenname = <span class="string">&#x27;_&#x27;</span>.join(parts[i:])</span><br><span class="line">    <span class="keyword">return</span> (states, tokenname)</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<details>   
    <summary>getrule实现过程</summary>   
    <pre>
- getrule    
# Sort the functions by line number
for f in self.funcsym.values():
    f.sort(key=lambda x: x[1].__code__.co_firstlineno)
# Sort the strings by regular expression length
for s in self.strsym.values():
    s.sort(key=lambda x: len(x[1]), reverse=True)    
     </pre>
</details>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">validate_all</span>(<span class="params">self</span>):</span></span><br><span class="line">    self.validate_tokens()<span class="comment">#给token拍个号子</span></span><br><span class="line">    <span class="comment">#&#123;&#x27;NUMBER&#x27;: 1, &#x27;PLUS&#x27;: 1&#125;</span></span><br><span class="line">    self.validate_literals()</span><br><span class="line">    self.validate_rules()<span class="comment">#这个规则和语法规则有什么关系?真的是简单的另一种词法规则的关系吗</span></span><br><span class="line">    <span class="keyword">return</span> self.error</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">c = re.<span class="built_in">compile</span>(<span class="string">&#x27;(?P&lt;%s&gt;%s)&#x27;</span> % (fname, _get_regex(f)), self.reflags)<span class="comment">#x</span></span><br></pre></td></tr></table></figure>

<h4 id="2-input"><a href="#2-input" class="headerlink" title="2 input"></a>2 input</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> 一个Lexer类;他的<span class="built_in">next</span>是重新定义的,返回的是self.token();</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#self.lexre,离谱;</span></span><br><span class="line">(re.<span class="built_in">compile</span>(<span class="string">r&#x27;(?P&lt;t_NUMBER&gt;\d+)|(?P&lt;t_newline&gt;\n+)|(?P&lt;t_PLUS&gt;\+)|(?P&lt;t_TIMES&gt;\*)|(?P&lt;t_LPAREN&gt;\()|(?P&lt;t_RPAREN&gt;\))|(?P&lt;t_MINUS&gt;-)|(?P&lt;t_DIVIDE&gt;/)&#x27;</span>,</span><br><span class="line"> re.UNICODE|re.VERBOSE),</span><br><span class="line"> </span><br><span class="line"> [<span class="literal">None</span>,</span><br><span class="line">  (&lt;function __main__.t_NUMBER(t)&gt;, <span class="string">&#x27;NUMBER&#x27;</span>),</span><br><span class="line">  (&lt;function __main__.t_newline(t)&gt;, <span class="string">&#x27;newline&#x27;</span>),</span><br><span class="line">  (<span class="literal">None</span>, <span class="string">&#x27;PLUS&#x27;</span>),</span><br><span class="line">  (<span class="literal">None</span>, <span class="string">&#x27;TIMES&#x27;</span>),</span><br><span class="line">  (<span class="literal">None</span>, <span class="string">&#x27;LPAREN&#x27;</span>),</span><br><span class="line">  (<span class="literal">None</span>, <span class="string">&#x27;RPAREN&#x27;</span>),</span><br><span class="line">  (<span class="literal">None</span>, <span class="string">&#x27;MINUS&#x27;</span>),</span><br><span class="line">  (<span class="literal">None</span>, <span class="string">&#x27;DIVIDE&#x27;</span>)])</span><br></pre></td></tr></table></figure>

<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">建立一个LexToken，这个是</span><br><span class="line"><span class="string">&#x27;LexToken(%s,%r,%d,%d)&#x27;</span> % (self.<span class="built_in">type</span>, self.value, self.lineno, self.lexpos)</span><br><span class="line">tok.value = m.group<span class="comment">#匹配到的值,m=re.compile().match()</span></span><br><span class="line">tok.lexpos = lexpos<span class="comment">#当前的词的位置</span></span><br><span class="line">i = m.lastindex</span><br><span class="line">func, tok.<span class="built_in">type</span> = lexindexfunc[i]</span><br></pre></td></tr></table></figure>

<h2 id="yacc"><a href="#yacc" class="headerlink" title="yacc"></a>yacc</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> self.parseopt_notrack(<span class="built_in">input</span>, lexer, debug, tracking, tokenfunc)</span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/10/08/PLY%E6%A8%A1%E5%9D%97/" data-id="ckuhmdwgu0001pscw2b7n91cy" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-platform模块" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/10/08/platform%E6%A8%A1%E5%9D%97/" class="article-date">
  <time class="dt-published" datetime="2021-10-08T00:17:33.054Z" itemprop="datePublished">2021-10-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">print</span>(sys.platform)<span class="comment">#win32</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(platform.uname())<span class="comment">#uname_result(system=&#x27;Windows&#x27;, node=&#x27;liji&#x27;, release=&#x27;10&#x27;, version=&#x27;10.0.19041&#x27;, machine=&#x27;AMD64&#x27;)</span></span><br></pre></td></tr></table></figure>


      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/10/08/platform%E6%A8%A1%E5%9D%97/" data-id="ckuhmdwgx0005pscwb6ba0644" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-算法自动(1)" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/10/08/%E7%AE%97%E6%B3%95%E8%87%AA%E5%8A%A8(1)/" class="article-date">
  <time class="dt-published" datetime="2021-10-08T00:13:45.323Z" itemprop="datePublished">2021-10-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="熊英飞老师网址"><a href="#熊英飞老师网址" class="headerlink" title="熊英飞老师网址"></a>熊英飞老师网址</h2><p>1 网址</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://xiongyingfei.github.io/recruit2022.html">https://xiongyingfei.github.io/recruit2022.html</a></p>
</blockquote>
<p>我现在重点关注一个研究问题：计算机能否自动生成算法？能做到什么程度？具体而言，给定形式化描述的算法问题，比如排序问题可以描述为：输入：i:list，输出：o:list，满足bag(o)=bag(i) /\ for any 0&lt;=i&lt;j&lt;len(o), o[i] &lt;= o[j]，我们希望能自动生成该问题的算法，效率越高越好。我们目前正在构建一个基于算法竞赛的题库，希望能找到算法自动解出尽可能多的题目。 </p>
<p>该问题有重要的研究价值和实践意义。让计算机学会自己写程序一直是科学家的美好愿望，但到目前能自动写的都是非常简单的程序，能够自动写出复杂的算法才真正学会了编程。在实践中，找到好的算法来优化程序一直是程序员面临的最大难题之一。该问题的解决方案可以辅助程序员设计算法，或者把程序看做形式化描述的问题本身，也可以自动优化写好的程序。</p>
<p>这个问题虽然较难，但不同领域的计算机科学家多年的积累已经给我们提供了解决该问题的基础。如果你也对该问题感兴趣，并且有兴趣在我的指导下攻读博士，可以先学习一下我的<a target="_blank" rel="noopener" href="https://xiongyingfei.github.io/SA/2020/main.htm">《软件分析技术》课</a>中关于程序综合的三次课的内容，并简要学习如下三项内容之一：</p>
<ul>
<li>程序演算的相关知识。推荐书《Algebra of Programming》作者Richard Bird和Oege de Moor。</li>
<li>约束编程的相关知识。推荐书《Principles of Constraint Programming》作者Krzysztof R. Apt。</li>
<li>决策过程的相关知识。推荐书《Decision Procedures: An Algorithmic Point of View》作者Daniel Kroening和Ofer Strichman。</li>
</ul>
<p>学习之后欢迎和我讨论你关于做这个问题的思路。</p>
<h2 id="软件分析技术-Software-Analysis"><a href="#软件分析技术-Software-Analysis" class="headerlink" title="软件分析技术(Software Analysis)"></a>软件分析技术(Software Analysis)</h2><p>程序分析技术关注如何做出正确的逼近,或者采用统计等概率手段来弥补.</p>
<h3 id="第一次课"><a href="#第一次课" class="headerlink" title="第一次课"></a>第一次课</h3><p>1 如何判断程序中的缺陷,比如判断c语言程序是否有内存泄漏,我们一般的做法是通过大量的实例去测试,这种枚举的方法对于测过的地方是可以保证程序没问题的,但是对于没测试过的地方,无法保证是否存在问题,也可以认为出现问题的概率也给不出来,这是不应该的.</p>
<p>2 哥德尔 , 哥德尔不完备定理; 没有bug 的程序是不存在的;</p>
<p>完备性:所有的真命题都可以被证明;</p>
<p>一致性:一个命题要么为真要么为假;</p>
<p>数学公理用素数表示,能推出来的用合数表示,那么</p>
<blockquote>
<p>计算机中的P与NP问题;</p>
</blockquote>
<p>根据哥德尔不完备性定理,编程语言是有限的,所以总有算法所不能表达.</p>
<p>3 原始方法输出是否,近似法:允许在得不到精确值的时候,给出不精确的答案,不精确的答案叫做不知道.</p>
<p>4 近似解 抽象法:</p>
<p>比如 正+负不知道是正数还是负数,就是不知道了</p>
<p>近似解:搜索法</p>
<p>遍历,超时就是不知道,有反例就是不成立,遍历完了都成立就是成立</p>
<h3 id="程序与算法"><a href="#程序与算法" class="headerlink" title="程序与算法"></a>程序与算法</h3><p>熊老师的想法是自动生成算法,</p>
<blockquote>
<p>比如排序问题可以描述为：输入：i:list，输出：o:list，满足bag(o)=bag(i) /\ for any 0&lt;=i&lt;j&lt;len(o), o[i] &lt;= o[j]，我们希望能自动生成该问题的算法，效率越高越好。</p>
</blockquote>
<p>算法的定义有几种,我在知乎上查询算法和程序有什么关系,大部分的回答都是算法是解决问题的思路,程序是具体的实现.谭sir 那本书上我记得,算法+数据结构=程序.按这个类推,解决问题的思路+队列等结构=程序.也可以理解成算法是比较固定的,我用冒泡排序的思想,可以使用队列可以使用栈,而且c语言python语言都不限制,都可以写程序.</p>
<h3 id="Code-Generation-Based-on-Deep-Learning-a-Brief-Review"><a href="#Code-Generation-Based-on-Deep-Learning-a-Brief-Review" class="headerlink" title="Code Generation Based on Deep Learning: a Brief Review"></a>Code Generation Based on Deep Learning: a Brief Review</h3><h4 id="名词解释"><a href="#名词解释" class="headerlink" title="名词解释"></a>名词解释</h4><p>software engineering(SE)</p>
<p>deep learning(DL)</p>
<p>code completion:代码生成</p>
<blockquote>
<p><strong>Autocomplete</strong>, or <strong>word completion</strong>, is a feature in which an <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Application_software">application</a> predicts the rest of a word a user is typing. In Android and iOS[<a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Autocomplete#cite_note-1">1]</a> smartphones, this is called <strong>predictive text</strong>. In <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Graphical_user_interface">graphical user interfaces</a>, users can typically press the <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Tab_key">tab key</a> to accept a suggestion or the down <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Arrow_key">arrow key</a> to accept one of several.</p>
</blockquote>
<p>IDEs (integrated development environments)</p>
<p>code patches :代码补丁</p>
<p>code synthesis: 狭义的代码生成</p>
<p>LMs:language models;和代码补全生成等相关的模型</p>
<p>API: API（Application Programming Interface,[应用程序编程接口）是一些预先定义的[函数]，目的是提供[应用程序]与开发人员基于某[软件]或硬件得以访问一组[例程]的能力，而又无需访问源码，或理解内部工作[机制]的细节。</p>
<p>deductive program synthesis (DPS)</p>
<h4 id="内容"><a href="#内容" class="headerlink" title="内容"></a>内容</h4><p>1 两种tool补全代码 </p>
<p>input-output samples; functionality description;</p>
<p>2 代码生成的定义</p>
<blockquote>
<p>automatic code generation refers to the utilization of tech-<br>niques to automatically generate source code for software devel-<br>opment, according to the requirements from the users. </p>
</blockquote>
<p>3 </p>
<blockquote>
<p> There are two major tasks in code generation – code completion and code<br>synthesis, which are the subjects of this paper.</p>
</blockquote>
<p>4 heuristic</p>
<blockquote>
<p>A heuristic or heuristic technique (/hjʊəˈrɪstɪk/; Ancient Greek: εὑρίσκω, heurískō, ‘I find, discover’), is any approach to problem solving or self-discovery that employs a practical method that is not guaranteed to be optimal, perfect, or rational, but is nevertheless sufficient for reaching an immediate, short-term goal or approximation. Where finding an optimal solution is impossible or impractical, heuristic methods can be used to speed up the process of finding a satisfactory solution. Heuristics can be mental shortcuts that ease the cognitive load of making a decision.[1][2] </p>
</blockquote>
<p>现实主义</p>
<p>5 Code synthesis </p>
<p>狭义的代码生成,传统的代码生成.</p>
<p>代码生成分为 基于input-output samples的代码生成, 基于functionality description 的代码生成.</p>
<p>6 研究方向</p>
<blockquote>
<p>There are at least three possible research directions in this field:</p>
<ol>
<li>to encode the context-free grammars into the neural network<br>for better syntax understanding, 2) to apply code completion for<br>specific development tool to alleviate the burden of software devel-<br>opment, and 3) to counter the adversarial non-robust issue caused<br>bythenatureofDLmodelsbyintroducingthefeaturesofprogram-<br>ming languages.</li>
</ol>
</blockquote>
<ul>
<li>将上下文无关文法编码到神经网络,为了更好理解语法.</li>
<li>应用于特定的工具</li>
<li>对抗DL模型的非健壮性,通过引入变成语言的特性(表示不理解,玄乎5)</li>
</ul>
<p>7 code completion</p>
<p><img src="C:\TyporaImage\image-20210712155829124.png" alt="image-20210712155829124"></p>
<p>$x$: ABCDEF,每一个都是$t$,即$t_1,..t_6$</p>
<p>$x_{1:k}$ :ABC</p>
<p>$f$:一个模型,一个黑盒子,经过它知道选择下一个选项的概率,还是选择某一个选项的概率呢?</p>
<p>$P_f(..)$: 条件概率,在ABC的条件下,选择x中的某一个的概率,还是选择下一项的概率呢?看这架势应该是输出一个t,或者代表t的东西,即选择下一项出现的概率.当然其实也一样,我选择EF的概率都求出来,选择一个概率最大的,也就变成了选择下一项出现的概率 这一问题.</p>
<p><img src="C:\TyporaImage\image-20210712161955791.png" alt="image-20210712161955791"></p>
<p>圈$f$ 是训练参数集合,L是loss;意思是在参数下,所有的loss相加最小,最好为0,就完美了.但是,这也算一种启发式吧.</p>
<p><img src="C:\TyporaImage\image-20210712203159247.png" alt="image-20210712203159247"></p>
<p>$z$: 用户需求</p>
<p>$g()$:model,生成code snippet;</p>
<p>$y$: 真值</p>
<p>8 一系列方法</p>
<p>code completion 特别注重局部特征;LM忽略了局部特征.e</p>
<p>关于code completion</p>
<p>non-terminal node 当作代码的结构信息.</p>
<p>确保ast变成seq时,保证ast 序列的唯一性.</p>
<p>API completion:比如 补全一个接口程序的名字,和code completion差不多,只是这个是api;</p>
<blockquote>
<p>so the similarity of vectors can be used to generate API sequences.</p>
</blockquote>
<p>相近的向量用来生成api,我感觉还是choose靠谱一点.</p>
<p>问题明显,局限于小样本,单功能程序;不通用;</p>
<p>4 code synthesis</p>
<p>4.1input-output samples</p>
<p>traditional :inductive program synthesis(IPS);归纳程序生成;programming by examples(PEB)</p>
<p>数据的来源: 1)明确定义的语言(domain specific language DSL) 2)excel data?</p>
<p>4.2 natural language descriptions</p>
<p>通过嵌入训练,把不好的自然语言描述变成好的自然语言描述.</p>
<blockquote>
<p>automatic generation of general programming language is rather difficult than IFTTT.</p>
</blockquote>
<p>5 future work</p>
<p>5.1 grammar information</p>
<p>a-&gt;b 1, b-&gt;c 2;不知道12是不是合法的,这啥意思,你到时候映射一下不就行了?</p>
<p>5.2 code generation testing</p>
<p>翻译不一致的问题,比如打开电灯翻译成open light only,打开冰箱就成了open ice ;</p>
<p>我们要修复我们的错误,通过一种”集成”的策略;emsemble;</p>
<p>5.3 application</p>
<p>5.4 adversarial robustness</p>
<p>adversarial training;对抗性训练;</p>
<p>6 related work</p>
<p>6.1 program synthesis</p>
<p>6.2 code completion</p>
<p>  建议文章,probabilistic model for code with decision tree和    Code Completion<br>with Neural Attention and Pointer Networks. </p>
<p>6.3 code retrieval 代码检索</p>
<p>给定自然描述检索最相关的代码. </p>
<p>CoaCor: Code<br>Annotation for Code Retrieval with Reinforcement Learning.这篇文章关于代码检索的</p>
<p>Retrieval-Based Neural Code Generation.这篇文章把检索和代码生成的方法结合在一起</p>
<p>7 summary</p>
<blockquote>
<p>The current code generation technology is limited to generating small-scale,<br>single-function, domain-specific programs, and its technology is<br>still very limited for complex programs.</p>
</blockquote>
<blockquote>
<p> how to better handle the excessively large vocabulary in the programming language is also an optional way to conduct research on code generation based on deep learning. </p>
</blockquote>
<p>a</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/10/08/%E7%AE%97%E6%B3%95%E8%87%AA%E5%8A%A8(1)/" data-id="ckuhma5ns00091ccw2299fov1" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-关于ast-code双向转换的调研" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/10/08/%E5%85%B3%E4%BA%8East-code%E5%8F%8C%E5%90%91%E8%BD%AC%E6%8D%A2%E7%9A%84%E8%B0%83%E7%A0%94/" class="article-date">
  <time class="dt-published" datetime="2021-10-08T00:13:45.321Z" itemprop="datePublished">2021-10-08</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="关于ast-code双向转换的调研"><a href="#关于ast-code双向转换的调研" class="headerlink" title="关于ast-code双向转换的调研"></a>关于ast-code双向转换的调研</h2><h3 id="1-python自带的ast模块"><a href="#1-python自带的ast模块" class="headerlink" title="1 python自带的ast模块"></a>1 python自带的ast模块</h3>
      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/10/08/%E5%85%B3%E4%BA%8East-code%E5%8F%8C%E5%90%91%E8%BD%AC%E6%8D%A2%E7%9A%84%E8%B0%83%E7%A0%94/" data-id="ckuhma5nl00021ccw2l45hx2z" data-title="" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  
    <article id="post-2021-10-07-hello-world2" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/10/08/2021-10-07-hello-world2/" class="article-date">
  <time class="dt-published" datetime="2021-10-07T23:32:00.000Z" itemprop="datePublished">2021-10-08</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Blogging/">Blogging</a>►<a class="article-category-link" href="/categories/Blogging/Tutorial/">Tutorial</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/10/08/2021-10-07-hello-world2/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h1 id="Hello-liji"><a href="#Hello-liji" class="headerlink" title="Hello liji"></a>Hello liji</h1><p>hi，guys！</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/10/08/2021-10-07-hello-world2/" data-id="ckuhma5nk00011ccwfb9l6gke" data-title="Hello World" class="article-share-link">Share</a>
      
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/hello/" rel="tag">hello</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-hello-world" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/10/07/hello-world/" class="article-date">
  <time class="dt-published" datetime="2021-10-07T13:11:09.824Z" itemprop="datePublished">2021-10-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="p-name article-title" href="/2021/10/07/hello-world/">Hello World</a>
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <p>Welcome to <a target="_blank" rel="noopener" href="https://hexo.io/">Hexo</a>! This is your very first post. Check <a target="_blank" rel="noopener" href="https://hexo.io/docs/">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a target="_blank" rel="noopener" href="https://hexo.io/docs/troubleshooting.html">troubleshooting</a> or you can ask me on <a target="_blank" rel="noopener" href="https://github.com/hexojs/hexo/issues">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">&quot;My New Post&quot;</span></span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/writing.html">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/server.html">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/generating.html">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>

<p>More info: <a target="_blank" rel="noopener" href="https://hexo.io/docs/one-command-deployment.html">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/10/07/hello-world/" data-id="ckuhma5nf00001ccw073q7g9p" data-title="Hello World" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/">&laquo; Prev</a><a class="page-number" href="/">1</a><span class="page-number current">2</span>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Blogging/">Blogging</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Blogging/Tutorial/">Tutorial</a></li></ul></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/hello/" rel="tag">hello</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/hello/" style="font-size: 10px;">hello</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/10/08/os%E6%A8%A1%E5%9D%97/">(no title)</a>
          </li>
        
          <li>
            <a href="/2021/10/08/Graphviz%E6%A8%A1%E5%9D%97%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B/">(no title)</a>
          </li>
        
          <li>
            <a href="/2021/10/08/args%E5%92%8Ckwargs%E5%AD%A6%E4%B9%A0/">(no title)</a>
          </li>
        
          <li>
            <a href="/2021/10/08/%E5%AD%97%E7%AC%A6%E4%B8%B2%E5%A4%84%E7%90%86/">(no title)</a>
          </li>
        
          <li>
            <a href="/2021/10/08/%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/">(no title)</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>